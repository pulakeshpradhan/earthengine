This Google Earth Engine (GEE) script performs environmental data analysis using satellite images from various datasets, calculating and exporting indices such as cloud cover, NDVI (Normalized Difference Vegetation Index), and Land Surface Temperature (LST) for a selected region. Let’s break down the main steps and explain each part in context.

1. Cloud Fraction Calculation using Sentinel-5P (COPERNICUS/S5P/NRTI/L3_CLOUD) Dataset
Purpose: The script starts by calculating the cloud fraction over a specified time range (April 2023 to September 2023). Cloud fraction represents the percentage of cloud cover within each satellite pixel and is useful for assessing cloudiness over an area.

Method:

```javascript
var collection = ee.ImageCollection('COPERNICUS/S5P/NRTI/L3_CLOUD')
  .filterDate('2023-04-01', '2023-09-01')
  .select('cloud_fraction');
```
This code snippet filters the Sentinel-5P dataset to select only the cloud_fraction band for the specified date range.
It calculates the mean cloud fraction using collection.mean(), which averages cloud cover data over the selected period.
A color palette is applied to visualize the cloud fraction.
2. MODIS NDVI Calculation (MODIS/MOD09GA_006_NDVI)
Purpose: NDVI measures vegetation health and density. Higher NDVI values indicate greener, healthier vegetation. Here, MODIS NDVI data from April to June 2018 is used.

Method:

```javascript

var dataset = ee.ImageCollection('MODIS/MOD09GA_006_NDVI')
                  .filter(ee.Filter.date('2018-04-01', '2018-06-01'));
```
The MODIS dataset is filtered by date and the NDVI band is selected.
dataset.mean() computes the average NDVI for the specified time range, and a custom color palette is applied for visualization.
3. Landsat-8 Data Processing for NDVI and LST Calculation (LANDSAT/LC08/C02/T1_L2)
Purpose: This step calculates NDVI and LST from Landsat-8 images. This dataset has high-resolution data suitable for vegetation and surface temperature analysis.

Method:

Scaling Factors: The function applyScaleFactors is defined to adjust Landsat’s optical (SR_B.*) and thermal (ST_B.*) bands with scaling factors.
```javascript
var opticalBands = image.select('SR_B.*').multiply(0.0000275).add(-0.2);
var thermalBands = image.select('ST_B.*').multiply(0.00341802).add(149.0);
```
NDVI Calculation: The calculateNDVI function computes NDVI as (NIR - Red) / (NIR + Red), which correlates with vegetation health.
```javascript
var ndvi = image.normalizedDifference(['SR_B5', 'SR_B4']).rename('NDVI');
```
LST Calculation: The calculateLST function estimates land surface temperature. The ST_B10 band provides surface brightness temperature, which is adjusted for emissivity derived from NDVI.
```javascript
var thermal = image.select('ST_B10').multiply(0.1);
var LST = thermal.expression(
  '(Tb/(1 + (0.00115 * (Tb / 1.438)) * log(Ep)))', {
    'Tb': thermal.select('ST_B10'),
    'Ep': EM.select('EMM')
  }).rename('LST');
```
Here, Ep is the calculated emissivity, derived from NDVI, which helps adjust temperature values for surface types (vegetation vs. bare soil).
4. Sampling and Exporting Data
Purpose: Sample and export point-based data to understand correlations among NDVI, cloud cover, LST, and vegetation conditions.

Method:

Point Sampling:
```javascript
var sample = ee.FeatureCollection.randomPoints({
  region: aoi,
  points: 500
});
```
A set of 500 random points is generated within the area of interest (AOI).
Data Extraction and Combining: The script creates an image combining the selected bands (ndvi, cloud, lst, land) and samples these bands at each random point.
```javascript
var imgSamp = swir1Bands.sampleRegions({
  collection: sample,
  scale: 30
})
```
sampleRegions extracts values from each band at each sample point.
Export to CSV:
```javascript
Export.table.toDrive({
  collection: imgSamp,
  description: 'CSV_points_Regression',
  folder: 'GEE',
  fileNamePrefix: 'CSV_points_Regression',
  fileFormat: 'CSV',
  selectors: ['ndvi', 'cloud', 'lst', 'land']
});
```
The sampled data is exported to Google Drive as a CSV file with columns for each index (ndvi, cloud, lst, land), which can be used for regression analysis or further statistical processing.
Summary
This script:

Analyzes Cloud Cover (Sentinel-5P) and NDVI (MODIS) over specific timeframes.
Calculates LST and NDVI using Landsat-8 images, enhancing environmental data for a specific region.
Samples Data Points and exports these indices to a CSV file, useful for regression analysis or other data science applications, such as modeling relationships between vegetation health and cloud cover or temperature.


```javascript
var geometry= ee.FeatureCollection('users/pulakesh/JMU')
Map.centerObject(geometry)
var collection = ee.ImageCollection('COPERNICUS/S5P/NRTI/L3_CLOUD')
  .filterDate('2023-04-01', '2023-09-01')
  .select('cloud_fraction');
var meanCollection =collection.mean();
var band_viz = {
  min: 0.40,
  max: 0.60,
  palette: ['#fff7fb','#ece7f2','#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']
};

Map.addLayer(meanCollection.clip(geometry), band_viz, 'S5P Cloud');

//------------------------------------------------------------------------------MODIS NDVI
var dataset = ee.ImageCollection('MODIS/MOD09GA_006_NDVI')
                  .filter(ee.Filter.date('2018-04-01', '2018-06-01'));
var colorized = dataset.select('NDVI').mean();
var colorizedVis = {
  min: 0,
  max: 1,
  palette: [
    'ffffff', 'ce7e45', 'df923d', 'f1b555', 'fcd163', '99b718', '74a901',
    '66a000', '529400', '3e8601', '207401', '056201', '004c00', '023b01',
    '012e01', '011d01', '011301'
  ],
};

Map.addLayer(colorized.clip(geometry), colorizedVis, 'MODIS NDVI');

//------------------------------------------------------------------------------MODIS LST
var geometry = ee.FeatureCollection('users/pulakesh/JMU');

var dataset = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')
    .filterBounds(geometry);

// Applies scaling factors.
function applyScaleFactors(image) {
  var opticalBands = image.select('SR_B.*').multiply(0.0000275).add(-0.2);
  var thermalBands = image.select('ST_B.*').multiply(0.00341802).add(149.0);
  return image.addBands(opticalBands, null, true).addBands(thermalBands, null, true);
}

dataset = dataset.map(applyScaleFactors);

var visualization = {
  bands: ['SR_B4', 'SR_B3', 'SR_B2'],
  min: 0.0,
  max: 0.3,
};

// Function to calculate NDVI.
function calculateNDVI(image) {
  var ndvi = image.normalizedDifference(['SR_B5', 'SR_B4']).rename('NDVI');
  return image.addBands(ndvi);
}

dataset = dataset.map(calculateNDVI);

// Function to calculate Land Surface Temperature (LST).
function calculateLST(image) {
  var thermal = image.select('ST_B10').multiply(0.1);
  var ndvi = image.select('NDVI');
  var minNDVI = ee.Number(ndvi.reduceRegion({ reducer: ee.Reducer.min(), scale: 30, maxPixels: 1e9 }).values().get(0));
  var maxNDVI = ee.Number(ndvi.reduceRegion({ reducer: ee.Reducer.max(), scale: 30, maxPixels: 1e9 }).values().get(0));
  var fv = ndvi.subtract(minNDVI).divide(maxNDVI.subtract(minNDVI)).pow(ee.Number(2)).rename('FV');
  var a = ee.Number(0.004);
  var b = ee.Number(0.986);
  var EM = fv.multiply(a).add(b).rename('EMM');

  var LST = thermal.expression(
    '(Tb/(1 + (0.00115 * (Tb / 1.438)) * log(Ep)))', {
      'Tb': thermal.select('ST_B10'),
      'Ep': EM.select('EMM')
    }).rename('LST');
  
  return image.addBands(LST);
}

dataset = dataset.map(calculateLST);

// Combine all LST images into a single multiband image. 
var REC = dataset.select('LST').filterDate('2021-01-01', '2021-01-30').median().clip(geometry);
var L8ND = dataset.select('NDVI').filterDate('2021-01-01', '2021-01-30').median().clip(geometry);
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++point to CSV

// Get the intersection between the two images - the area of interest (aoi).
var aoi = geometry;

// Get a set of 1000 random points from within the aoi. A feature collection
// is returned.
var sample = ee.FeatureCollection.randomPoints({
  region: aoi,
  points: 500
});

var lst = REC;
var land = L8ND;
var ndvi = colorized;
var cloud = collection.mean();

// Combine the SWIR1 bands from each image into a single image.
var swir1Bands = ndvi.select('NDVI')
  .addBands(cloud.select('cloud_fraction'))
  .addBands(lst.select('LST'))
  .addBands(land.select('NDVI'))
  .rename(['ndvi', 'cloud', 'lst', 'land']);



// Sample the SWIR1 bands using the sample point feature collection.
var imgSamp = swir1Bands.sampleRegions({
  collection: sample,
  scale: 30
})
// Add a constant property to each feature to be used as an independent variable.
.map(function(feature) {
  return feature.set('constant', 1);
});

print(imgSamp)

Export.table.toDrive({
  collection: imgSamp,
  description: 'CSV_points_Regression',
  folder: 'GEE',
  fileNamePrefix: 'CSV_points_Regression',
  fileFormat: 'CSV',
  selectors: ['ndvi', 'cloud', 'lst', 'land']
});






