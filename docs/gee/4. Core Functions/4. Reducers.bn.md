# рж░рж┐ржбрж┐ржЙрж╕рж╛рж░ тАФ рж╕рзНржерж╛ржи ржУ рж╕ржоржпрж╝рзЗрж░ ржоржзрзНржпрзЗ ржбрзЗржЯрж╛ рж╕ржВржХрзНрж╖рзЗржкржг (Reducers тАФ Summarizing Data)

ржПржХржЯрж┐ **рж░рж┐ржбрж┐ржЙрж╕рж╛рж░ (Reducer)** рж╣рж▓рзЛ ржПржХржЯрж┐ ржЧрж╛ржгрж┐рждрж┐ржХ ржЕржкрж╛рж░рзЗрж╢ржи ржпрж╛ ржЕржирзЗржХржЧрзБрж▓рзЛ ржорж╛ржиржХрзЗ ржПржХржЯрж┐ рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк ржорж╛ржирзЗ ржкрж░рж┐ржгржд ржХрж░рзЗред

ржПржХржЯрж┐ ржЧрзНрж░рзЗржбрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржХржерж╛ ржнрж╛ржмрзБржиред ржПржХржЬржи рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзА рж╕рж╛рж░рж╛ ржмржЫрж░рзЗ рззрзжржЯрж┐ ржкрж░рзАржХрзНрж╖рж╛ржпрж╝ рж╕рзНржХрзЛрж░ ржкрж╛ржпрж╝ред рж░рж┐ржбрж┐ржЙрж╕рж╛рж░ рждрж╛рж░ **ржЧржбрж╝ рж╕рзНржХрзЛрж░** ржмрзЗрж░ ржХрж░рзЗ тАФ рззрзжржЯрж┐ ржорж╛ржиржХрзЗ рззржЯрж┐ ржЕрж░рзНржержкрзВрж░рзНржг рж╕ржВржЦрзНржпрж╛ржпрж╝ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗред

ржЖрж░рзНрже ржЗржЮрзНржЬрж┐ржирзЗ, рж░рж┐ржбрж┐ржЙрж╕рж╛рж░ ржжрзБржЯрж┐ ржорж╛рждрзНрж░рж╛ржпрж╝ ржХрж╛ржЬ ржХрж░рзЗ:

```mermaid
graph TD
    A[рж░рж┐ржбрж┐ржЙрж╕рж╛рж░] --> B["ЁЯУЕ ржЯрзЗржорзНржкрзЛрж░рж╛рж▓ рж░рж┐ржбрж╛ржХрж╢ржи\n(ржЕржирзЗржХ ржЫржмрж┐ тЖТ ржПржХржЯрж┐ ржЫржмрж┐)"]
    A --> C["ЁЯУР рж╕рзНржкрзЗрж╢рж┐ржпрж╝рж╛рж▓ рж░рж┐ржбрж╛ржХрж╢ржи\n(ржЕржирзЗржХ ржкрж┐ржХрзНрж╕рзЗрж▓ тЖТ ржПржХржЯрж┐ рж╕ржВржЦрзНржпрж╛)"]
    B --> D["ржЙржжрж╛рж╣рж░ржг: ржХрж╛рж▓рзЗржХрж╢ржирзЗ .median()"]
    C --> E["ржЙржжрж╛рж╣рж░ржг: ржЫржмрж┐рждрзЗ .reduceRegion()"]
    style A fill:#4db6ac,color:#fff,stroke:#333
    style B fill:#e3f2fd,stroke:#333
    style C fill:#e8f5e9,stroke:#333
```

---

## ржЕржВрж╢ рзз: ржЯрзЗржорзНржкрзЛрж░рж╛рж▓ рж░рж┐ржбрж┐ржЙрж╕рж╛рж░ (ржХрж╛рж▓рзЗржХрж╢ржи тЖТ ржЫржмрж┐)

ржПржЧрзБрж▓рзЛ ржПржХржЯрж┐ **ImageCollection** (рж╕ржоржпрж╝рзЗрж░ рж╕рж╛ржерзЗ ржЕржирзЗржХ ржЫржмрж┐) ржХрзЗ ржПржХржЯрж┐ **ржПржХржХ ржЫржмрж┐рждрзЗ** рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗред

### рж╕рж╛ржзрж╛рж░ржг ржЯрзЗржорзНржкрзЛрж░рж╛рж▓ рж░рж┐ржбрж┐ржЙрж╕рж╛рж░

| рж░рж┐ржбрж┐ржЙрж╕рж╛рж░ ржкржжрзНржзрждрж┐ | ржХрзА ржлрзЗрж░ржд ржжрзЗржпрж╝ | рж╕ржмржЪрзЗржпрж╝рзЗ ржнрж╛рж▓рзЛ ржмрзНржпржмрж╣рж╛рж░ |
| :--- | :--- | :--- |
| `.median()` | рж╕ржоржпрж╝рзЗрж░ ржоржзрзНржпржо ржорж╛ржи | ржорзЗржШржорзБржХрзНржд ржХржорзНржкрзЛржЬрж┐ржЯ |
| `.mean()` | ржЧржбрж╝ ржорж╛ржи | рждрж╛ржкржорж╛рждрзНрж░рж╛, ржмрзГрж╖рзНржЯрж┐ржкрж╛ржд |
| `.min()` | рж╕рж░рзНржмржирж┐ржорзНржи ржорж╛ржи | рж╢рзБрж╖рзНржХрждржо/рж╢рзАрждрж▓рждржо рж╕ржоржпрж╝ |
| `.max()` | рж╕рж░рзНржмрзЛржЪрзНржЪ ржорж╛ржи | ржмржирзНржпрж╛рж░ ржмрж┐рж╕рзНрждрж╛рж░, ржЖржЧрзБржи |
| `.sum()` | ржорзЛржЯ рж╕ржЮрзНржЪрж┐ржд ржорж╛ржи | ржмрж╛рж░рзНрж╖рж┐ржХ ржмрзГрж╖рзНржЯрж┐ржкрж╛рждрзЗрж░ ржпрзЛржЧржлрж▓ |
| `.mosaic()` | рж╕рж░рзНржмрж╢рзЗрж╖ ржкрж┐ржХрзНрж╕рзЗрж▓ ржЙржкрж░рзЗ | ржжрзНрж░рзБржд ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓ ржХржорзНржкрзЛржЬрж┐ржЯ |

### ржЙржжрж╛рж╣рж░ржг: ржорзЗржШржорзБржХрзНржд ржХржорзНржкрзЛржЬрж┐ржЯ рждрзИрж░рж┐

=== "JavaScript"
    ```javascript
    var collection = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')
      .filterDate('2023-01-01', '2023-12-31')
      .filterBounds(ee.Geometry.Point([85.82, 20.30]));

    // ржорж┐ржбрж┐ржпрж╝рж╛ржи рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗржЗ ржЖржЙржЯрж▓рж╛ржпрж╝рж╛рж░ (ржпрзЗржоржи ржорзЗржШ) рж╕рж░рж┐ржпрж╝рзЗ ржжрзЗржпрж╝
    var medianComposite = collection.median();

    // ржоржзрзНржпржорж╛ рждрж╛ржкржорж╛рждрзНрж░рж╛рж░ ржорждрзЛ ржХрзНрж░ржорж╛ржЧржд ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓рзЗрж░ ржЬржирзНржп ржнрж╛рж▓рзЛ
    var meanImage = collection.mean();

    Map.centerObject(ee.Geometry.Point([85.82, 20.30]), 10);
    Map.addLayer(medianComposite, {bands: ['SR_B4','SR_B3','SR_B2'], min:7000, max:30000}, 'ржорж┐ржбрж┐ржпрж╝рж╛ржи ржХржорзНржкрзЛржЬрж┐ржЯ');
    ```

=== "Python"
    ```python
    collection = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2') \
        .filterDate('2023-01-01', '2023-12-31') \
        .filterBounds(ee.Geometry.Point([85.82, 20.30]))

    median_composite = collection.median()
    mean_image = collection.mean()
    ```

---

## ржЕржВрж╢ рзи: рж╕рзНржкрзЗрж╢рж┐ржпрж╝рж╛рж▓ рж░рж┐ржбрж┐ржЙрж╕рж╛рж░ (ржкрж┐ржХрзНрж╕рзЗрж▓ тЖТ рж╕ржВржЦрзНржпрж╛)

ржПржЧрзБрж▓рзЛ ржПржХржЯрж┐ ржЫржмрж┐рж░ ржПржХржЯрж┐ ржЕржЮрзНржЪрж▓рзЗрж░ **рж╕ржм ржкрж┐ржХрзНрж╕рзЗрж▓** ржХрзЗ **ржПржХржЯрж┐ рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк ржорж╛ржирзЗ** (ржмрж╛ ржорж╛ржирзЗрж░ ржПржХржЯрж┐ ржбрж┐ржХрж╢ржирж╛рж░рж┐рждрзЗ) ржкрж░рж┐ржгржд ржХрж░рзЗред

ржПржЯрж┐ ржПржЗрж╕ржм ржкрзНрж░рж╢рзНржирзЗрж░ ржЙрждрзНрждрж░ ржжрзЗржпрж╝:

- *"ржЖржорж╛рж░ ржЕржзрзНржпржпрж╝ржи ржПрж▓рж╛ржХрж╛рж░ ржоржзрзНржпрзЗ ржЧржбрж╝ NDVI ржорж╛ржи ржХржд?"*
- *"ржмржирзНржпрж╛-ржЖржХрзНрж░рж╛ржирзНржд ржкрж┐ржХрзНрж╕рзЗрж▓рзЗрж░ ржорзЛржЯ ржЖржпрж╝рждржи ржХржд?"*
- *"ржПржЗ ржЬрзЗрж▓рж╛рж░ ржоржзрзНржпрзЗ рж╕рж░рзНржмрзЛржЪрзНржЪ ржЙржЪрзНржЪрждрж╛ ржХржд?"*

### `.reduceRegion()` тАФ рж╕ржмржЪрзЗржпрж╝рзЗ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА рж╕рзНржкрзЗрж╢рж┐ржпрж╝рж╛рж▓ рж░рж┐ржбрж┐ржЙрж╕рж╛рж░

=== "JavaScript"
    ```javascript
    // ржПржХржЯрж┐ ржЕржзрзНржпржпрж╝ржи ржПрж▓рж╛ржХрж╛рж░ ржЧржбрж╝ NDVI ржЧржгржирж╛ ржХрж░рзБржи
    var studyArea = ee.Geometry.Rectangle([85.5, 20.1, 86.1, 20.6]);

    var image = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')
      .filterDate('2023-01-01', '2023-12-31')
      .filterBounds(studyArea)
      .median();

    var ndvi = image.normalizedDifference(['SR_B5', 'SR_B4']).rename('NDVI');

    var stats = ndvi.reduceRegion({
      reducer: ee.Reducer.mean(),  // ржЕржкрж╛рж░рзЗрж╢ржи
      geometry: studyArea,         // ржХрзЛржерж╛ржпрж╝ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░ржмрзЗржи
      scale: 30,                   // ржорж┐ржЯрж╛рж░рзЗ ржкрж┐ржХрзНрж╕рзЗрж▓ рж░рзЗржЬрзЛрж▓рж┐ржЙрж╢ржи
      maxPixels: 1e9               // ржирж┐рж░рж╛ржкрждрзНрждрж╛ рж╕рзАржорж╛
    });

    print('ржЕржзрзНржпржпрж╝ржи ржПрж▓рж╛ржХрж╛ржпрж╝ ржЧржбрж╝ NDVI:', stats.get('NDVI'));
    ```

=== "Python"
    ```python
    study_area = ee.Geometry.Rectangle([85.5, 20.1, 86.1, 20.6])

    image = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2') \
        .filterDate('2023-01-01', '2023-12-31') \
        .filterBounds(study_area) \
        .median()

    ndvi = image.normalizedDifference(['SR_B5', 'SR_B4']).rename('NDVI')

    stats = ndvi.reduceRegion(
        reducer=ee.Reducer.mean(),
        geometry=study_area,
        scale=30,
        maxPixels=1e9
    )

    print('ржЧржбрж╝ NDVI:', stats.get('NDVI').getInfo())
    ```

---

## ржЕржВрж╢ рзй: ржПржХрж╛ржзрж┐ржХ рж░рж┐ржбрж┐ржЙрж╕рж╛рж░ ржПржХрждрзНрж░рж┐ржд ржХрж░рж╛

ржЖржкржирж┐ `.combine()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХрж╕рж╛ржерзЗ ржПржХрж╛ржзрж┐ржХ ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи ржЧржгржирж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

=== "JavaScript"
    ```javascript
    var combinedReducer = ee.Reducer.mean()
      .combine(ee.Reducer.min(), '', true)
      .combine(ee.Reducer.max(), '', true)
      .combine(ee.Reducer.stdDev(), '', true);

    var fullStats = ndvi.reduceRegion({
      reducer: combinedReducer,
      geometry: studyArea,
      scale: 30,
      maxPixels: 1e9
    });

    print('NDVI ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи:', fullStats);
    // ржлрзЗрж░ржд ржжрзЗржпрж╝: {NDVI_mean: ..., NDVI_min: ..., NDVI_max: ..., NDVI_stdDev: ...}
    ```

=== "Python"
    ```python
    combined_reducer = ee.Reducer.mean() \
        .combine(ee.Reducer.min(), '', True) \
        .combine(ee.Reducer.max(), '', True) \
        .combine(ee.Reducer.stdDev(), '', True)

    full_stats = ndvi.reduceRegion(
        reducer=combined_reducer,
        geometry=study_area,
        scale=30,
        maxPixels=1e9
    )

    print('NDVI ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи:', full_stats.getInfo())
    ```

---

## ржЕржВрж╢ рзк: ржлрж┐ржЪрж╛рж░ ржХрж╛рж▓рзЗржХрж╢ржирзЗ рж░рж┐ржбрж╛ржХрж╢ржи

ржпржЦржи ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ ржПржХрж╛ржзрж┐ржХ ржЕржЮрзНржЪрж▓ ржЖржЫрзЗ (ржпрзЗржоржи, ржПржХрж╛ржзрж┐ржХ ржЬрзЗрж▓рж╛), рждржЦржи `.reduceRegions()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи тАФ ржПржХрж╕рж╛ржерзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржЕржЮрзНржЪрж▓рзЗрж░ ржЬржирзНржп ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи ржЧржгржирж╛ ржХрж░рждрзЗред

=== "JavaScript"
    ```javascript
    // ржУржбрж┐рж╢рж╛рж░ ржкрзНрж░рждрж┐ржЯрж┐ ржЬрзЗрж▓рж╛рж░ NDVI ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи ржкрж╛ржи
    var districts = ee.FeatureCollection("FAO/GAUL/2015/level2")
      .filter(ee.Filter.eq('ADM1_NAME', 'Odisha'));

    var withNDVI = ndvi.reduceRegions({
      collection: districts,
      reducer: ee.Reducer.mean(),
      scale: 30
    });

    // ржкрзНрж░рждрж┐ржЯрж┐ ржлрж┐ржЪрж╛рж░рзЗ ржПржЦржи 'mean' NDVI ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ ржЖржЫрзЗ
    print('NDVI рж╕рж╣ ржЬрзЗрж▓рж╛ржЧрзБрж▓рзЛ:', withNDVI.first());
    Export.table.toDrive({
      collection: withNDVI,
      description: 'Odisha_District_NDVI',
      fileFormat: 'CSV'
    });
    ```

=== "Python"
    ```python
    districts = ee.FeatureCollection("FAO/GAUL/2015/level2") \
        .filter(ee.Filter.eq('ADM1_NAME', 'Odisha'))

    with_ndvi = ndvi.reduceRegions(
        collection=districts,
        reducer=ee.Reducer.mean(),
        scale=30
    )

    print('ржкрзНрж░ржержо ржЬрзЗрж▓рж╛ NDVI:', with_ndvi.first().getInfo())
    ```

---

## ржжрзНрж░рзБржд рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржЪрж┐ржЯ рж╢рж┐ржЯ

```mermaid
graph LR
    A[ржЖржкржирж╛рж░ рж▓ржХрзНрж╖рзНржп] --> B{ржХрзЛржи ржзрж░ржирзЗрж░ рж░рж┐ржбрж╛ржХрж╢ржи?}
    B -->|ржЕржирзЗржХ ржЫржмрж┐ тЖТ ржПржХржЯрж┐ ржЫржмрж┐| C["collection.median()\ncollection.mean()"]
    B -->|ржПрж▓рж╛ржХрж╛ржпрж╝ ржкрж┐ржХрзНрж╕рзЗрж▓ тЖТ ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи| D["image.reduceRegion()"]
    B -->|ржПржХрж╛ржзрж┐ржХ ржЕржЮрзНржЪрж▓| E["image.reduceRegions()"]
    B -->|ржЫржмрж┐ + рж╕ржоржпрж╝ тЖТ ржЪрж╛рж░рзНржЯ| F["ui.Chart.image.series()"]
    style C fill:#e3f2fd,stroke:#333
    style D fill:#e8f5e9,stroke:#333
    style E fill:#fff3e0,stroke:#333
    style F fill:#fce4ec,stroke:#333
```

!!! tip "рж╕рзНржХрзЗрж▓ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг (Scale Matters)"
    `reduceRegion`-ржПрж░ `scale` ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ ржЧржгржирж╛рж░ ржЬржирзНржп ржкрж┐ржХрзНрж╕рзЗрж▓рзЗрж░ ржЖржХрж╛рж░ ржорж┐ржЯрж╛рж░рзЗ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗред рж╕ржмржЪрзЗржпрж╝рзЗ рж╕ржарж┐ржХ ржлрж▓рж╛ржлрж▓рзЗрж░ ржЬржирзНржп ржЖржкржирж╛рж░ ржбрзЗржЯрж╛рж╕рзЗржЯрзЗрж░ **ржорзВрж▓ рж░рзЗржЬрзЛрж▓рж┐ржЙрж╢ржи** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи (рж▓рзНржпрж╛ржирзНржбрж╕рзНржпрж╛ржЯ = рзйрзжржорж┐, рж╕рзЗржирзНржЯрж┐ржирзЗрж▓-рзи = рззрзжржорж┐, MODIS = рзирзлрзжржорж┐+)ред

!!! warning "рж╕ржмрж╕ржоржпрж╝ `maxPixels` рж╕рзЗржЯ ржХрж░рзБржи"
    `maxPixels` ржЫрж╛ржбрж╝рж╛ ржЖрж░рзНрже ржЗржЮрзНржЬрж┐ржи ржмржбрж╝ ржЧржгржирж╛ ржХрж░рждрзЗ ржЕрж╕рзНржмрзАржХрж╛рж░ ржХрж░ржмрзЗ тАФ ржЖржкржирж╛ржХрзЗ рж░рж╛ржиржЕрзНржпрж╛ржУржпрж╝рзЗ ржЯрж╛рж╕рзНржХ ржерзЗржХрзЗ рж░ржХрзНрж╖рж╛ ржХрж░рждрзЗред ржмрзЗрж╢рж┐рж░ржнрж╛ржЧ ржХрзНрж╖рзЗрждрзНрж░рзЗ `1e9` (рзз ржмрж┐рж▓рж┐ржпрж╝ржи) рж╕рзЗржЯ ржХрж░рзБржиред
