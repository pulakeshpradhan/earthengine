```javascript
/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var srtm = ee.Image("CGIAR/SRTM90_V4"),
    chirps = ee.ImageCollection("UCSB-CHG/CHIRPS/DAILY"),
    roi = ee.FeatureCollection("users/chaitanyaks/Maharashtra/Pune_District");
/***** End of imports. If edited, may not auto-convert in the playground. *****/
/*
-----------------------------------------------------------------------------------------------------------------------------------------
CALCULATE AVERAGE ELEVATION OF ROI
------------------------------------------------------------------------------------------------
*/
 
//Using ee.Image Constructor
//var srtm = ee.Image("CGIAR/SRTM90_V4");

// Map.setCenter(73.79,18.45,12);

//Centre Map Panel to Area of Interest
Map.centerObject(roi,8);

Map.addLayer(roi,{color: 'blue'});

//Add image to Map Panel as a layer without passing other parameters 
// Map.addLayer(srtm);

print(srtm);//print metadata to the console

//Change Visualisation Parameters and name the layer
Map.addLayer(srtm, {min:500,max:1200,palette:'green,yellow, orange, brown' },'srtm');

var opacity  = 0.5; // set the opacity/transparency
Map.addLayer(srtm, {min:500,max:1200,palette:'#013220,#90ee90,#ffff00,#ffa500,#ff0000' },'srtm', true, opacity);

//Apply a computation to the image using EE method and add new layer to the Map Panel
var slope = ee.Terrain.slope(srtm);

Map.addLayer(slope, {min:0, max: 30}, 'slope');

// Compute avg elevation for region of interest ie Pune District
var avgElevation = srtm.reduceRegion({
  reducer: ee.Reducer.mean(),
  geometry: roi,
});
print('avgElevation', avgElevation);






/*
-----------------------------------------------------------------------------------------------------------------------------------------
CALCULATE RAINFALL STATISTICS FOR ROI
------------------------------------------------------------------------------------------------
*/

// Filter Chirps Daily Data for the  year 2022
var chirpsFiltered = chirps.filterDate('2022-01-01','2023-01-01');

//Calculate cumulative rainfall for the year 2022
var totalRainfall = chirpsFiltered.sum();

//Visualise total annual rainfall by adding layer to Map panel
Map.addLayer(totalRainfall,{min:0,max:3000, palette:'white,blue'});

Map.setCenter(80.65, 16.52,8);

//Clip total rainfall layer for Pune district
var puneTotalRainfall = totalRainfall.clip(roi);
Map.addLayer(puneTotalRainfall,{min:0,max:3000, palette:'white,blue'});

//Calculate Average Rainfall for Pune District for the year 2022
//var puneAvgRainfall = totalRainfall.reduceRegion(ee.Reducer.mean(), roi, 5000);
var puneAvgRainfall = totalRainfall.reduceRegion({
  reducer: ee.Reducer.mean(),
  geometry: roi,
  scale: 5000
});
print(puneAvgRainfall); //reduceRegion() returns a dictionary


//Compute the total quantum of Rainfall over Pune district for the year 2022
var img = ee.Image.pixelArea();
var quantumOfRainfall = (totalRainfall.divide(1000)).multiply(img);
print(quantumOfRainfall);
var puneTotalRainfall = quantumOfRainfall.reduceRegion({
  reducer:ee.Reducer.sum(),
  geometry: roi,
  crs: 'EPSG:32644',
  scale: 5000
  });

print('Total amount of Rainfall over Pune District in the year 2022 (in BCM) :', ee.Number(puneTotalRainfall.get('precipitation')).divide(1e9));



/*
CREATE A TIME SERIES CHART OF ANNUAL RAINFALL AVERAGED OVER ROI  
------------------------------------------------------------------------
Adapted from https://mygeoblog.com/2018/09/30/precipitation-in-river-basin/
*/

//Create a list of years for the range of chirps data availability
var listOfYears = ee.List.sequence(1981, 2022);
print(listOfYears);

//create a userdefined function that filters entire chirps data for any year and returns an image of total annual rainfall

var annualRainfallImage = function(y){
    var totalRainfall_y = chirps.filter(ee.Filter.calendarRange(y, y, 'year')).sum();
    return totalRainfall_y.set('year',y)
          .set('system:time_start',ee.Date.fromYMD(y,1,1));
  };

//create Image Collection of total annual rainfall images for preparing chart as below
var listOfAnnualRainfallImages = listOfYears.map(annualRainfallImage)
var annualRainfallImages = ee.ImageCollection.fromImages(listOfAnnualRainfallImages);


// Predefine the chart titles
var title = {
  title: 'Yearly Precipitation over Pune District',
  hAxis: {title: 'Year'},
  vAxis: {title: 'Precipitation (mm)'},
};

// create a chart of annual rainfall averaged over NTR District using 'ui.Chart.image.seriesByRegion'
var chart = ui.Chart.image.seriesByRegion(annualRainfallImages,roi, ee.Reducer.mean(), 'precipitation', 5000, 'system:time_start',' ')
.setOptions(title) //set chart options
.setChartType('ColumnChart'); //set chart type

//print chart
print(chart);

//Read the value of chart for 2022 and compare with Average Rainfall computed for the year 2022 above

