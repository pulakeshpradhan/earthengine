## Water Surface Area Charting
##### [https://code.earthengine.google.co.in/9e82406b1579173e08c89a7996133dba](https://code.earthengine.google.co.in/9e82406b1579173e08c89a7996133dba)
---
This script is using Google Earth Engine (GEE) to analyze the water spread area in Study Area, using Sentinel-2 imagery. 
### **Step-by-step Explanation of the Code:**
#### 1\. **Defining the Region of Interest (ROI) and Satellite Data**
```javascript
var studyArea = 
    ee.Geometry.Polygon(
        [[[85.76361517120263, 20.52393128133101],
          [85.76361517120263, 20.41553715846105],
          [85.95621923614404, 20.41553715846105],
          [85.95621923614404, 20.52393128133101]]], null, false);
var S2 = ee.ImageCollection("COPERNICUS/S2_SR");
```
*   **`studyArea`** is the FeatureCollection for the study area, which represents the geographic area of interest (ROI).
*   **`S2`** refers to the Sentinel-2 Surface Reflectance (SR) ImageCollection, which provides satellite images from the Sentinel-2 mission.

#### 2\. **Filtering the Image Collection**
```javascript
var S2filtered = S2.filterDate('2020-10-01', '2021-06-01')
                   .filterBounds(studyArea)
                   .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE',30));
```

*   This line filters the Sentinel-2 image collection to only include images from **October 1, 2020, to June 1, 2021**.
*   It also filters for images that cover the study area  (**`filterBounds(studyArea)`**).
*   Additionally, it selects only those images with less than **30% cloud coverage** (**`CLOUDY_PIXEL_PERCENTAGE`**).

#### 3\. **Adding NDWI Band to the Images**
```javascript
var addNDWI = function(inputImage) {
  var ndwi = inputImage.normalizedDifference(['B3','B8']).rename('ndwi');
  return inputImage.addBands(ndwi); 
};
var imagesWithNDWI = S2filtered.map(addNDWI);
```
*   The NDWI (Normalized Difference Water Index) is calculated using the **Green (B3)** and **Near-Infrared (B8)** bands of Sentinel-2.
*   This function adds the NDWI as a new band to each image in the filtered collection.
*   **`normalizedDifference(['B3','B8'])`** computes the NDWI, where water bodies typically have higher values.

#### 4\. **Calculating Water Area in the Region of Interest**
```javascript
var waterAr = function(inputImage) {
  var waterMask = inputImage.select('ndwi').gte(ndwiThreshold);
  var pixelArea = ee.Image.pixelArea();
  var waterpixels = pixelArea.updateMask(waterMask);
  var waterArea = waterpixels.reduceRegion({
    reducer: ee.Reducer.sum(),
    geometry: studyArea,
    crs: inputImage.select('B3').projection(),  
    maxPixels: 1e8,
    bestEffort: true
  });
  var areaImage = ee.Image(waterArea.getNumber('area').divide(1e6)).rename('waterspreadarea'); 
  return inputImage.addBands(areaImage);
};
var areaSeries = imagesWithNDWI.map(waterAr);
```

*   **`waterMask`** creates a binary mask where NDWI values greater than or equal to **0.15** are considered water pixels (indicating areas with water bodies).
*   **`pixelArea`** calculates the area of each pixel.
*   **`waterArea`** sums up the pixel areas where water is detected (using `reduceRegion`) and returns the total water area for each image in square meters.
*   The water area is then converted from square meters to square kilometers and added as a new band called **`waterspreadarea`**.

#### 5\. **Creating a Time Series Chart**
```javascript
var title = {
  title: 'Water Spread Area in studyArea (Sq.km)',
  hAxis: {title: 'Time'},
  vAxis: {title: 'Water Spread Area'},
};
var chart = ui.Chart.image.seriesByRegion(areaSeries,studyArea, ee.Reducer.mean(), 'waterspreadarea', 10, 'system:time_start',' ')
.setChartType('ColumnChart') //set chart type
 .setOptions(title); //set chart options
print(chart);
```

*   **`areaSeries`** is a time series of images with the water spread area for each image.
*   The chart is created using **`ui.Chart.image.seriesByRegion`**, which plots the **water spread area** (in square kilometers) over time (using `system:time_start` as the time axis).
*   The chart is configured to display as a **ColumnChart**, with appropriate axis labels for **time** and **water spread area**.

#### 6\. **Challenges with Cloud Cover**

The comment in the code:
```javascript
// Due to cloud cover especially during monsoon period water spread area values may not be representative
```
![ee-chart (1)](https://github.com/user-attachments/assets/bc8e72f5-9844-4d6e-8d43-d360e2017185)

Made by [Pulakesh Pradhan](https://www.linkedin.com/in/pulakeshpradhan/)
