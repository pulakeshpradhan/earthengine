```javascript
/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var aoi = /* color: #d63000 */ee.Geometry.Point([75.0745500963488, 18.21151791379558]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// Load Sentinel-2 Image Collection
var sentinel2 = ee.ImageCollection('COPERNICUS/S2_HARMONIZED')
                  .filterBounds(aoi)
                  .filterDate('2024-01-01', '2024-01-30')
                  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE', 20))
                  .median();
 
//Chlorophyll-a concentration using band ratio: (B5 - B4) / (B5 + B4)

var chlorophyllA = sentinel2.expression(
  '693*((B5 - B4) / (B5 + B4))+40', {
    'B5': sentinel2.select('B5'),  // Red Edge 1
    'B4': sentinel2.select('B4')   // Red
  }).rename('Chlorophyll_a');

// Mask non-water areas using NDWI
var ndwi = sentinel2.normalizedDifference(['B3', 'B8']).rename('NDWI');
var waterMask = ndwi.gt(0);  // Use a threshold to create a water mask

// Apply the water mask to the Chlorophyll-a layer
var chlorophyllAWater = chlorophyllA.updateMask(waterMask);

// Visualize the results
Map.centerObject(aoi, 10);
Map.addLayer(sentinel2, {bands: ['B4', 'B3', 'B2'], min: 0, max: 3000}, 'Sentinel-2');
Map.addLayer(chlorophyllAWater, {min: 0, max: 20, palette: ['blue','cyan','yellow','green']}, 'Chlorophyll-a in mg/m3');

