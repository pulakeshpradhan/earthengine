```javascript

/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var L8 = ee.ImageCollection("LANDSAT/LC08/C02/T1_TOA"),
    roi = /* color: #d63000 */ee.Geometry.Point([73.79046580347735, 18.450347193320102]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
var VisParams = {min: 0, max: 0.3,bands: ['B4', 'B3', 'B2']};

//Filter the image collection over the year 2022(Temporal) and roi(spatial)
var L8Filtered = L8.filterDate('2022-01-01', '2023-01-01')
    .filterBounds(roi);

//Sort filtered ImageCollection by Cloud_Cover property in metadata and get the least Cloud_Cover image
var img = L8Filtered.sort('CLOUD_COVER').first();

//Calculate the NDVI for the first image through expression
// NDVI = (NIR - RED) / (NIR + RED), where
// RED is B4 in Landsat8
// NIR is B5 in Landsat8
 
// var nir = img.select('B5');
// var red = img.select('B4');
// var ndvi = ee.Image(nir.subtract(red).divide(nir.add(red)));

//Calculate the NDVI using ee Method
var ndvi = img.normalizedDifference(['B5','B4']);

//User defined function to calculate NDVI for an image and add it as a band
var addNDVI = function(inputImage) {
  var ndvi = inputImage.normalizedDifference(['B5','B4']).rename('ndvi');
  return inputImage.addBands(ndvi); 
  };
  
//Calculate NDVI using user defined function
var imageWithNDVI = addNDVI(img);

//Print Bandnames of original image
var bandNamesBefore = img.bandNames();
print('Band Names:',bandNamesBefore);

//Print Bandnames of generated image
var bandNamesAfter = imageWithNDVI.bandNames();
print('Band Names:',bandNamesAfter);


//Display the input image and NDVI layer in the Map panel

// Map.addLayer(img, VisParams, 'Input Image');
// Map.centerObject(roi,12);
// // Map.addLayer(ndvi,{min:0,max:0.7, palette:'red,green'},'NDVI');

// // Make a palette: a list of hex strings.
// //Read more about headecimal color codes at http://www.colorhexa.com/
// var ndvi_palette = ['FFFFFF', 'CE7E45', 'DF923D', 'F1B555', 'FCD163', '99B718',
//               '74A901', '66A000', '529400', '3E8601', '207401', '056201',
//               '004C00', '023B01', '012E01', '011D01', '011301'];
               
// Map.addLayer(ndvi,{min:0,max:0.7, palette: ndvi_palette},'NDVI');
               

